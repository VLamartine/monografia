<!DOCTYPE html>
<html>

<head>
  <title>Verifiable draw</title>
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/sorteio.css">
  <script src="/js/main.js"></script>
  <script src="/js/sorteio.js"></script>
</head>

<body>
  <header class="header">
    <a href="../sorteio" class="drawCategories">Random draw</a>
    <a href="../comPesos" class="drawCategories">Weighted draw</a>
    <a href="../verificar" class="drawCategories">Verify</a>
  </header>
  <div class="container">
    <div class="data divisory">
      <form class="form">
        <p class="ta-center">Choose the origin for the draw's seed</p>
        <select id="seedOrigin" onchange="handleSeedOriginChange(this)">
          <option value="nist" selected>Randomness Beacon - NIST</option>
          <option value="uchile">Randomness Beacon - University of Chile</option>
          <option value="inmetro">Randomness Beacon - INMETRO</option>
          <option value="user">Insert manually</option>
        </select>
        <label for="seed" id="user-seed" class="user-seed display-none">
          Insert Seed
          <input id="seed" class="w-50 m-auto" type="text" placeholder="Seed">
        </label>
        <div class="beacon-seed" id="beacon-seed">
          <div class="timeOptions">
            <label class="optionsLabel" for="last">
              <input type="radio" onclick="handlePulseTimeChange(this)" name="time" id="last" value="last" checked>
              Use last pulse
            </label>
            <label class="optionsLabel" for="future">
              <input type="radio" onclick="handlePulseTimeChange(this)" name="time" id="future" value="future">
              Use next pulse
            </label>
            <label class="optionsLabel" for="past">
              <input type="radio" onclick="handlePulseTimeChange(this)" name="time" id="past" value="past">
              Choose previous pulse
            </label>
          </div>
          <div class="datetime display-none" id="datetime">
            <input type="date" id="date" onchange="handleTimeChange()">
            <input type="time" id="time" onchange="handleTimeChange()">
            <span id="timeError" class="timeError display-none">You can't use a time in the future.</span>
          </div>
        </div>
        <p class="ta-center">
          Insert the items below, one per line
        </p>
        <textarea id="items" class="items_input" class="m-auto border"></textarea>
        <button type="button" onclick="shuffle()" class="shuffle border">Draw</button>

        <div id="formatedData" class="formated-data display-none">
          <table class="formated-data-table">
            <thead>
              <th>Strings used</th>
              <th>Hashed strings</th>
            </thead>
            <tbody id="formatedDataTable">
            </tbody>
          </table>
        </div>
      </form>
    </div>
    <div class="results ta-center">
      <p class="msg display-none" id="msg">
        Draw programmed at <span id="dateShuffle"></span>.
        The seed for the draw is the pulse generated at <span id="datePulse"></span>.
        <br>
        Draw in <span id="remainingTime"></span> seconds.
      </p>
      <p class="seed m-auto">Seed: <b id="baseSeed" style="word-break: break-all;"></b></p>
      <p id="pulse" class="display-none pulseIndex">Pulse index: <b id="pulseIndex"></b></p>
      <div class="result-list-div ta-center">
        <p style="font-size: 22px;">Draw results</p>
        <ol id="resultList" class="ta-left results-list display-none">
        </ol>
      </div>
      <div id="hash-buttons" class="display-none">
        <button id="hash-button-show" onclick="toggleHash(true)">Show hash</button>
        <button id="hash-button-hide" onclick="toggleHash(false)" class="display-none">Hide hash</button>
      </div>
      <div class="result-key">
        Draw key: <span id="key"></span>
      </div>
    </div>
  </div>
  <div class="about">
    <a href="./sobre.html">About</a> |
    <select name="language" id="language" onchange="changeLanguage(this)">
      <option value="pt">Portuguese</option>
      <option value="en" selected>English</option>
    </select>
  </div>
</body>

</html>